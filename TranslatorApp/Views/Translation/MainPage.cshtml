@model TranslatorApp.Models.TranslationData

<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="/css/mainpage.css" rel="stylesheet" />
    <title>Fordító - Azure Translatorral</title>
</head>
<body>
    <div class="container">
        <h1>Fordítás Azure Translatorral</h1>
        
        <form action="/Translation/TranslateAndUpload" method="post" class="translation-form">
            <label for="OriginalText">Eredeti szöveg:</label>
            <textarea id="OriginalText" name="OriginalText" placeholder="Írd ide a fordítandó szöveget..." required></textarea>

            <label for="OriginalLanguage">Eredeti nyelv:</label>
            <select id="OriginalLanguage" name="OriginalLanguage">
                <option value="" disabled selected>Válassz... (opcionális)</option>
            </select>

            <label for="TargetLanguage">Fordítás nyelve:</label>
            <select id="TargetLanguage" name="TargetLanguage" required>
                <option value="" disabled selected>Válassz...</option>
            </select>

            <button type="submit">Fordítás és feltöltés</button>
        </form>

        @if (Model != null && !string.IsNullOrEmpty(Model.TranslatedText))
        {
            <hr />
            <section class="result-section">
                <h2>Eredmény</h2>
                <p><strong>Eredeti: </strong><span>@Model.OriginalText</span></p>
                <p><strong>Fordított: </strong><span>@Model.TranslatedText</span></p>
            </section>
        }
    </div>

    <script>
        async function loadLanguages() {
            const response = await fetch('https://api.cognitive.microsofttranslator.com/languages?api-version=3.0&scope=translation');
                if (!response.ok) throw new Error('Hiba a nyelvek lekérésekor');

                const data = await response.json();
                const languages = data.translation;
                const originalLangSelect = document.getElementById('OriginalLanguage');
                const targetLangSelect = document.getElementById('TargetLanguage');

                for (const [code, lang] of Object.entries(languages)) {
                    const optionText = `${lang.name} (${lang.nativeName})`;
                    const optionOriginal = document.createElement('option');
                    optionOriginal.value = code;
                    optionOriginal.textContent = optionText;
                    originalLangSelect.appendChild(optionOriginal);

                    const optionTarget = document.createElement('option');
                    optionTarget.value = code;
                    optionTarget.textContent = optionText;
                    targetLangSelect.appendChild(optionTarget);
                }
        }

        document.addEventListener('DOMContentLoaded', loadLanguages);
    </script>
</body>
</html>
